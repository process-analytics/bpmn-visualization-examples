import{d as I,s as C,w as P,u as A,F as L,r as p,e as S,l as c,i as B,j as O,k as b,m as T,n as E,S as v,o as d,p as n,q as x,t as h,v as q}from"./main.js";import"./mxgraph.js";let s=[],u=[],y=[];const a="detection";let f=!0,r=!0;function D(t){const e={font:{},fill:{},stroke:{}};if(n.isTask(t))e.font.color="Indigo",e.fill.color="gold",e.font.size=14,e.fill.opacity=20;else if(n.isEvent(t))n.isBoundaryEvent(t)?(e.font.color="inherit",e.fill.color="inherit",e.stroke.color="inherit"):(e.font.color="MediumTurquoise",e.stroke.color="MediumTurquoise");else if(n.isGateway(t))e.font.color="CadetBlue",e.font.opacity=85,e.stroke.color="OrangeRed",e.stroke.width=4;else if(n.isPoolOrLane(t))e.font.color="white !important",e.fill.color="deeppink",e.stroke.opacity=80;else if(n.isCallActivity(t))e.font.color="white",e.font.family="Times New Roman",e.font.isItalic=!0,e.font.isStrikeThrough=!0,e.fill.color={startColor:"LightYellow",endColor:"LimeGreen",direction:"left-to-right"};else if(n.isSubProcess(t))e.font.color="white",e.font.size=14,e.font.family="Dialog",e.font.isBold=!0,e.font.isItalic=!0,e.font.isUnderline=!0,e.font.isStrikeThrough=!0,e.fill.color="MidnightBlue",e.opacity=60;else switch(t){case"group":case"textAnnotation":e.font.color="Crimson",e.font.size=18,e.font.family="Verdana",e.font.isBold=!0,e.font.isUnderline=!0,e.stroke.color="Chartreuse",e.stroke.width=6;break;case"messageFlow":case"sequenceFlow":case"association":e.font.color="Chocolate",e.stroke.color="Chocolate",e.stroke.width=4;break}return e}function w(t,e){const o=t.filter(T),l=t.filter(i=>!o.includes(i));o.length>0&&(y=E([v.POOL,v.LANE]).map(i=>i.bpmnSemantic.id),d(y,{opacity:5,font:{color:"blue",opacity:5},fill:{color:"pink"},stroke:{color:"green"}})),d(o,{fill:{color:"swimlane"},stroke:{color:"swimlane"},font:{color:"swimlane"}}),n.isBoundaryEvent(e)&&(u=x(l),d(u,{opacity:5,font:{color:"green",opacity:5},fill:{color:"gold"},stroke:{color:"red"}}));const m=D(e);d(l,m)}function F(t){p(s,a),B(t,a)}function N(t,e){k(),w(t,e)}function k(){h(s),h(u),u=[],h(y),y=[]}function z(t,e){s.forEach(o=>S(o)),f?t.forEach(o=>q(o,G(e))):c("Do not display overlays")}function g(t){c(`Searching for Bpmn elements of '${t}' kind`);const e=E(t);R(e,t);const o=e.map(l=>l.bpmnSemantic.id);r?F(o):N(o,t),z(o,t),s=o}function R(t,e){const o=document.getElementById("elements-result"),l=`Found ${t.length} ${e}(s)`;c(l);const m=t.map(i=>`  - ${i.bpmnSemantic.id}: '${i.bpmnSemantic.name}'`).join(`
`);o.value+=[l,m].join(`
`)+`
`,o.scrollTop=o.scrollHeight}function U(){const t=document.getElementById("elements-result");t.value=""}function $(){const t=document.getElementById("bpmn-kinds-select");t.onchange=l=>g(l.target.value),document.addEventListener("diagramLoaded",()=>g(t.value),!1),document.getElementById("clear-btn").onclick=function(){U(),r?p(s,a):k(),s.forEach(l=>S(l)),s=[]};const e=document.getElementById("checkbox-display-overlays");e.addEventListener("change",function(){f=this.checked,c("Request overlays display:",f),g(t.value)}),e.checked=f;const o=document.getElementById("checkbox-css-style");o.addEventListener("change",function(){r=this.checked,c("Request CSS style feature:",r),r?(k(),B(s,a)):(p(s,a),w(s,t.value))}),o.checked=r}function G(t){return n.isActivity(t)?{position:"top-right",label:"30",style:{font:{color:"Chartreuse",size:20},fill:{color:"DimGray"}}}:t.includes("Gateway")?{position:"top-left",label:"3",style:{stroke:{color:"HotPink",width:4}}}:t.includes("Event")?{position:"bottom-left",label:"15"}:t.includes("lane")||t.includes("pool")?{position:"bottom-right",label:"100"}:t.includes("Flow")?{position:"middle",label:"999",style:{fill:{color:"PaleTurquoise",opacity:25}}}:{position:"top-left",label:"40"}}function M(){document.getElementById("btn-dl-svg").addEventListener("click",O,!1),document.getElementById("btn-dl-png").addEventListener("click",b,!1)}I(()=>{C({globalOptions:{container:document.querySelector(".bpmn-container"),navigation:{enabled:!0}},statusKoNotifier:P}),A({type:L.Center,margin:20}),$(),M()});
