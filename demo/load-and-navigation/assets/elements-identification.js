import{d as I,s as C,w as P,u as A,F as L,r as p,e as B,l as c,i as E,j as O,k as x,m as T,n as w,S as v,o as d,p as i,q,t as g,v as F,x as D}from"./main.js";import"./mxgraph.js";let s=[],u=[],y=[];const a="detection";let f=!0,r=!0;function N(t){const e={font:{},fill:{},stroke:{}};if(F(t)){switch(t){case"messageFlow":case"sequenceFlow":case"association":e.font.color="Chocolate",e.stroke.color="Chocolate",e.stroke.width=4;break}return e}if(i.isTask(t))e.font.color="Indigo",e.fill.color="gold",e.font.size=14,e.fill.opacity=20;else if(i.isEvent(t))i.isBoundaryEvent(t)?(e.font.color="inherit",e.fill.color="inherit",e.stroke.color="inherit"):(e.font.color="MediumTurquoise",e.stroke.color="MediumTurquoise");else if(i.isGateway(t))e.font.color="CadetBlue",e.font.opacity=85,e.stroke.color="OrangeRed",e.stroke.width=4;else if(i.isPoolOrLane(t))e.font.color="white !important",e.fill.color="deeppink",e.stroke.opacity=80;else if(i.isCallActivity(t))e.font.color="white",e.font.family="Times New Roman",e.font.isItalic=!0,e.font.isStrikeThrough=!0,e.fill.color={startColor:"LightYellow",endColor:"LimeGreen",direction:"left-to-right"};else if(i.isSubProcess(t))e.font.color="white",e.font.size=14,e.font.family="Dialog",e.font.isBold=!0,e.font.isItalic=!0,e.font.isUnderline=!0,e.font.isStrikeThrough=!0,e.fill.color="MidnightBlue",e.opacity=60;else switch(t){case"group":case"textAnnotation":e.font.color="Crimson",e.font.size=18,e.font.family="Verdana",e.font.isBold=!0,e.font.isUnderline=!0,e.stroke.color="Chartreuse",e.stroke.width=6;break}return e}function S(t,e){const o=t.filter(T),l=t.filter(n=>!o.includes(n));o.length>0&&(y=w([v.POOL,v.LANE]).map(n=>n.id),d(y,{opacity:5,font:{color:"blue",opacity:5},fill:{color:"pink"},stroke:{color:"green"}})),d(o,{fill:{color:"swimlane"},stroke:{color:"swimlane"},font:{color:"swimlane"}}),i.isBoundaryEvent(e)&&(u=q(l),d(u,{opacity:5,font:{color:"green",opacity:5},fill:{color:"gold"},stroke:{color:"red"}}));const h=N(e);d(l,h)}function b(t){p(s,a),E(t,a)}function z(t,e){k(),S(t,e)}function k(){g(s),g(u),u=[],g(y),y=[]}function M(t,e){s.forEach(o=>B(o)),f?t.forEach(o=>D(o,G(e))):c("Do not display overlays")}function m(t){c(`Searching for Bpmn elements of '${t}' kind`);const e=w(t);R(e,t);const o=e.map(l=>l.id);r?b(o):z(o,t),M(o,t),s=o}function R(t,e){const o=document.getElementById("elements-result"),l=`Found ${t.length} ${e}(s)`;c(l);const h=t.map(n=>`  - ${n.id}: '${n.name}'`).join(`
`);o.value+=[l,h].join(`
`)+`
`,o.scrollTop=o.scrollHeight}function U(){const t=document.getElementById("elements-result");t.value=""}function $(){const t=document.getElementById("bpmn-kinds-select");t.onchange=l=>m(l.target.value),document.addEventListener("diagramLoaded",()=>m(t.value),!1),document.getElementById("clear-btn").onclick=function(){U(),r?p(s,a):k(),s.forEach(l=>B(l)),s=[]};const e=document.getElementById("checkbox-display-overlays");e.addEventListener("change",function(){f=this.checked,c("Request overlays display:",f),m(t.value)}),e.checked=f;const o=document.getElementById("checkbox-css-style");o.addEventListener("change",function(){r=this.checked,c("Request CSS style feature:",r),r?(k(),E(s,a)):(p(s,a),S(s,t.value))}),o.checked=r}function G(t){return i.isActivity(t)?{position:"top-right",label:"30",style:{font:{color:"Chartreuse",size:20},fill:{color:"DimGray"}}}:t.includes("Gateway")?{position:"top-left",label:"3",style:{stroke:{color:"HotPink",width:4}}}:t.includes("Event")?{position:"bottom-left",label:"15"}:t.includes("lane")||t.includes("pool")?{position:"bottom-right",label:"100"}:t.includes("Flow")?{position:"middle",label:"999",style:{fill:{color:"PaleTurquoise",opacity:25}}}:{position:"top-left",label:"40"}}function j(){document.getElementById("btn-dl-svg").addEventListener("click",O,!1),document.getElementById("btn-dl-png").addEventListener("click",x,!1)}I(()=>{C({globalOptions:{container:document.querySelector(".bpmn-container"),navigation:{enabled:!0}},statusKoNotifier:P}),A({type:L.Center,margin:20}),$(),j()});
